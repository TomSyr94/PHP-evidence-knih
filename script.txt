-- SQL skript pro tvorbu databáze, včetně tvorby uživatele a nastavení oprávnění

-- 1. Vytvoření databáze
CREATE DATABASE IF NOT EXISTS evidence_knih CHARACTER SET utf8 COLLATE utf8_general_ci;

-- 2. Použití databáze
USE evidence_knih;

-- 3. Vytvoření tabulky books
CREATE TABLE IF NOT EXISTS books (
    id INT AUTO_INCREMENT PRIMARY KEY,
    isbn VARCHAR(20) NOT NULL,
    author_firstname VARCHAR(100) NOT NULL,
    author_lastname VARCHAR(100) NOT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT
);

-- 4. Vytvoření uživatele (pouze pokud neexistuje)
CREATE USER IF NOT EXISTS 'knihy_user'@'localhost' IDENTIFIED BY 'knihy_heslo';

-- 5. Přidělení oprávnění uživateli
GRANT SELECT, INSERT, UPDATE, DELETE ON evidence_knih.* TO 'knihy_user'@'localhost';

-- 6. Aplikování změn
FLUSH PRIVILEGES;

-- 7. Vložení ukázkových dat (volitelně)
INSERT INTO books (isbn, author_firstname, author_lastname, title, description) VALUES
('978-80-7203-123-4', 'Karel', 'Čapek', 'R.U.R.', 'Drama o robotech'),
('978-80-7336-456-7', 'Božena', 'Němcová', 'Babička', 'Klasický český román'),
('978-80-206-789-0', 'Milan', 'Kundera', 'Nesnesitelná lehkost bytí', 'Filozofický román');

